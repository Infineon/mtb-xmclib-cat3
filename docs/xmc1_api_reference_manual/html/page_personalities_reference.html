<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>XMC Peripheral Library for XMC1000 Family: Personalities Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">XMC Peripheral Library for XMC1000 Family</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_personalities_reference.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Personalities Reference </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="section_personality_introduction"></a>
Personality Introduction</h1>
<p>The XMC Peripheral Library includes a set of files to enable the ModusToolbox™ Device Configurator functionality. These files are known as personalities. They describe the GUI to the microcontroller hardware resources for the Device Configurator in the xml format. Each hardware resource of a microcontroller has its own personality.<br />
 Based on the user settings, personalities generate initialization code (configuration structures and initialization API calls) executed within the init_cycfg_all() function. The init_cycfg_all() function is usually executed within the cybsp_init() function or may be called directly in the main() function by the user. The system clock personalities generate a strong definition of the SystemCoreClockSetup() function executed at a startup (before jumping to main.c, not within the init_cycfg_all() unlike other ModusToolbox™ PDL products).</p>
<p>For more details, refer to:<br />
</p><ul>
<li>ModusToolbox™ <a href="../../../output/tools_3.1/device-configurator/docs/device-configurator.pdf"><b>Device Configurator user guide.</b> </a> <br />
</li>
<li>ModusToolbox™ <a href="https://www.infineon.com/dgdl/Infineon-ModusToolbox_Device_Configurator_Guide_(Version_2.20)-Software-v01_00-EN.pdf?fileId=8ac78c8c7e7124d1017ed92244542bab&amp;utm_source=cypress&amp;utm_medium=referral&amp;utm_campaign=202110_globe_en_all_integration-files"><b>Device Configurator guide.</b> </a> <br />
</li>
</ul>
<h2><a class="anchor" id="subsection_personality_common_groups"></a>
Common Groups</h2>
<p>The parameters of microcontroller resources are allocated in groups. Most of the personalities have groups named:<b> Documentation, Connections, Advanced.</b></p>
<p><a class="anchor" id="paragraph_personality_documentation"></a></p><dl class="section user"><dt>Documentation</dt><dd>The "Documentation" group displays one or more links to the documentation:<ul>
<li><b>API Help:</b> is the link to the application programing interface (API) documentation of the hardware resource to which the current displayed personality is related.</li>
<li><b>Personality Help:</b> is the link to the documentation of the current personality. </li>
</ul>
</dd></dl>
<p><a class="anchor" id="paragraph_personality_connections"></a></p><dl class="section user"><dt>Connections</dt><dd>The "Connections" group contains the parameters, which link different personalities and different hardware resources. This way, configurations chains are formed. <br />
 </dd></dl>
<p><a class="anchor" id="paragraph_personality_advanced"></a></p><dl class="section user"><dt>Advanced</dt><dd><p class="startdd">The "Advanced" group may contain all or one of the listed parameters:</p>
<ul>
<li><b>Start After Initialization:</b> If enabled, the peripheral will start at the end of the peripheral initialization.</li>
<li><b>Store Config in Flash:</b> Controls whether the configuration structure is stored in flash (const, true) or SRAM (not const, false). </li>
</ul>
</dd></dl>
<h1><a class="anchor" id="section_personality_pin"></a>
Pin Personality</h1>
<p>The pins of the Pin personality for XMC family microcontrollers do not generate service requests. This feature is determined by the hardware architecture of the XMC family.<br />
 However, pins can be configured as event resources for the Event Request Unit (ERU), and ERU will generate a service request instead of Pin.<br />
</p>
<p>To adjust an Interrupt from a pin (GPIO) requires the adjustments by the configurations chain: <a class="el" href="page_personalities_reference.html#section_personality_pin">Pin</a> - <a class="el" href="page_personalities_reference.html#subsection_personality_ers">ERU_ERS</a> - <a class="el" href="page_personalities_reference.html#subsection_personality_etl">ERU_ETL</a> - <a class="el" href="page_personalities_reference.html#subsection_personality_ogu">ERU_OGU/Service Request</a>. </p><div class="image">
<img src="pin_interrupt_config.png" alt="pin_interrupt_config.png" width="70%"/>
</div>
<p>Refer to the <a class="el" href="page_personalities_reference.html#section_personality_eru">ERU Personality</a> section for Interrupt configuration details. <br />
 Refer to the API reference <a class="el" href="group___g_p_i_o.html">General Purpose Input Output (GPIO)</a> for the API details. <br />
 Refer to the device Datasheet and Reference Manual for HW details.</p>
<h1><a class="anchor" id="section_personality_eru"></a>
ERU Personality</h1>
<p>The Event Request Unit (ERU) architecture includes three subunits: Event Request Select (ERS), Event Trigger Logic (ETL), and Output Gating Unit (OGU).<br />
 Thus, the ERU personality is represented as the three personalities of the ERU subunits. <br />
</p>
<p>For more details, refer to:<br />
</p><ul>
<li><a class="el" href="group___e_r_u.html#brief_pdlapi_eru">ERU Detailed Description</a> from the API reference.<br />
</li>
<li>XMC 1000, XMC 4000 <a href="https://www.infineon.com/dgdl/Infineon-ERU-XMC1000_XMC4000-AP32306-AN-v01_00-EN.pdf?fileId=5546d4624e765da5014ed914180d1c24"><b>Event Request Unit (ERU)</b> </a> Application Note. <br />
</li>
</ul>
<h2><a class="anchor" id="subsection_personality_ers"></a>
ERS Personality</h2>
<p>The ERS personality provides a graphical interface to connect a corresponding ERS input channel to a specific event source, to determine the ERS output signal Combination Logic, and to connect an ERS unit with a corresponding ETL unit.</p>
<div class="image">
<img src="ers_personality_connections.png" alt="ers_personality_connections.png" width="55%"/>
</div>
<p> After ERS is set, the next step of the ERU adjustment by the configuration chain is configuration of the <a class="el" href="page_personalities_reference.html#subsection_personality_etl">ETL</a>.</p>
<h2><a class="anchor" id="subsection_personality_etl"></a>
ETL Personality</h2>
<p>The ETL personality provides a graphical interface to determine the conditions of incoming signal processing. If the incoming signal satisfies the conditions defined by the "Edge Detection" parameter, the signal is regarded as a true event.<br />
 The event generates a trigger, whose distribution path to OGU is also controlled by the parameters of the ETL personality GUI. <br />
</p>
<div class="image">
<img src="etl_personality_connections.png" alt="etl_personality_connections.png" width="53%"/>
</div>
<p> To continue ERU adjustments, go to the <a class="el" href="page_personalities_reference.html#subsection_personality_ogu">OGU</a> personality configuration by the configuration chain.</p>
<h2><a class="anchor" id="subsection_personality_ogu"></a>
OGU Personality.</h2>
<p>An OGU unit combines trigger events and status information and gates the Output. The OGU personality provides a graphical interface to determine in which way that will occurs. </p><dl class="section note"><dt>Note</dt><dd>The OGU settings may be set so that an event of one Input will lead to reactions on several Outputs.</dd></dl>
<p>OGU Outputs may be used as triggers for the other units, for example, to DMA.<br />
 An OGU reaction may be setting the service request generation. To enable the service request generation, check the "Pattern Detection" parameter. <br />
</p>
<div class="image">
<img src="ogu_personality_connections.png" alt="ogu_personality_connections.png" width="70%"/>
</div>
<p>Refer to the API reference <a class="el" href="group___e_r_u.html">Event Request Unit (ERU)</a> for the API details.<br />
 Refer to the XMC 1000, XMC 4000 <a href="https://www.infineon.com/dgdl/Infineon-ERU-XMC1000_XMC4000-AP32306-AN-v01_00-EN.pdf?fileId=5546d4624e765da5014ed914180d1c24"><b>Event Request Unit (ERU)</b> </a> Application Note. <br />
 Refer to the device Datasheet and Reference Manual for HW details.</p>
<h1><a class="anchor" id="section_personality_ccu4"></a>
CCU4 Personality</h1>
<p>There are two major revisions: 1.0 and 2.0.</p>
<p>CCU4 1.0 is legacy and contains old-style EVENT_HANDLER definitions, which are deprecated and not recommended for usage in new applications.</p>
<p>CCU4 1.0 is left in XMCLib for the backward compatibility with already created projects not to be updated by the user.</p>
<p>The CCU4 1.0 support will be removed in the next major XMCLib revision.</p>
<p>CCU4 2.0 is almost the same as 1.0 but without the deprecated items, so it is recommended for new applications.</p>
<h2><a class="anchor" id="subsection_ccu_codeGen"></a>
Code Generation</h2>
<p>Modern INTERRUPT_HANDLER definitions recommended for usage in applications are generated instead of the deprecated items:</p>
<div class="image">
<img src="ccu4_sr0_setting.png" alt="ccu4_sr0_setting.png"/>
</div>
 <div class="image">
<img src="ccu4_sr0_handler.png" alt="ccu4_sr0_handler.png"/>
</div>
<p> These newly generated definitions can be used in the application code, for example for the xmc4xxx devices: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> MyCCU4_SR0_INTERRUPT_HANDLER(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___c_c_u4.html#ga40dd61be60dc66c77164829280181e90">XMC_CCU4_SLICE_ClearEvent</a>(MyCCU4Slice_HW, <a class="code" href="group___c_c_u4.html#gga9b6b22c75755089c6c4038de4a5d213ca1110754891260f416e50d1ad2bb30930">XMC_CCU4_SLICE_IRQ_ID_PERIOD_MATCH</a>);</div><div class="line">}</div></div><!-- fragment --><p>and for enabling the CCU4 interrupt before starting the block: </p><div class="fragment"><div class="line">    NVIC_EnableIRQ(MyCCU4_SR0_IRQN);</div><div class="line">    <a class="code" href="group___c_c_u4.html#ga9997bb59706a4034e3e3be33a4935a7c">XMC_CCU4_SLICE_StartTimer</a>(MyCCU4Slice_HW);</div></div><!-- fragment --><p> Refer to the API reference <a class="el" href="group___c_c_u4.html">Capture Compare Unit 4(CCU4)</a> for the API details.</p>
<p>Refer to the device Datasheet and Reference Manual for the HW details.</p>
<h1><a class="anchor" id="section_personality_posif"></a>
POSIF Personality</h1>
<h2><a class="anchor" id="subsection_personality_posif_qd"></a>
Quadrature Decoder Mode</h2>
<p>Quadrature Decoder mode is used to find the position and speed of the motor using the incremental encoder. The profile is designed so that it can estimate the angle by consuming 3 CCU4 slices and an optional CCU4 slice along with POSIF and its interconnections.</p>
<p>Four CCU4 slices are consumed for the following purposes:</p><ol type="1">
<li>Position Counter<br />
<ul>
<li>Set the slice to be in Counter mode, which starts ticking based on encoder pulses to provide the absolute position:</li>
<li>Connect the Status Signal of the Position Counter CCU4 to an optional Revolution Counter CCU4 slice Event 0 Input Signal.</li>
<li>Set the Count Function of the Revolution Counter CCU4 slice to Triggered by Event 0.</li>
<li>Set the Event 0 Edge Selection of the Revolution Counter CCU4 slice to Signal Active on Falling Edge.</li>
<li>Set the Event 0 Level Selection of the Revolution Counter CCU4 slice to Active on the High Level.</li>
</ul>
</li>
<li>Revolution Counter (optional)<br />
<ul>
<li>Set the slice to be in Counter mode, which ticks based on the Position Counter period match (Falling edge of ST signal).</li>
</ul>
</li>
<li>Time Between Ticks<br />
<ul>
<li>The slice to measure time between ticks for the angle extrapolation.</li>
</ul>
</li>
<li>Time Stamp Trigger<br />
<ul>
<li>The slice to generate a trigger at the time stamp point when the angle extrapolation is required.</li>
<li>Connect the Status Signal of the Time Stamp Trigger CCU4 slice to the Position Counter and Revolution Counter CCU4 slices Event 2 Input Signal, and the Time Between Ticks CCU4 slice Event 1 Input Signal.</li>
<li>Set the Capture 0 Function of the Position Counter and Revolution Counter CCU4 slices to Triggered by Event 2 and set the Capture 1 Function for the Time Between Ticks CCU4 slice to Triggered by Event 1.</li>
<li>Set the Event 2 Edge Selection of the Position Counter and Revolution Counter as well as Event 1 Edge Selection of the Time Between Ticks CCU4 slices to Signal Active on Falling Edge.</li>
<li>Set the Event 2 Level Selection of the Position Counter and Revolution Counter as well as Event 1 Level Selection of the Time Between Ticks CCU4 slices to Active on High Level.</li>
</ul>
</li>
</ol>
<p>The POSIF module and its interconnection with CCU4 are depicted in the following diagram: </p><div class="image">
<img src="posif_encoder_structure.png" alt="posif_encoder_structure.png"/>
</div>
<h2><a class="anchor" id="subsection_personality_posif_hsm"></a>
Hall Sensor Mode</h2>
<p>Hall Sensor mode is used to find the position and speed of the motor using 2 or 3 hall sensors. The POSIF personality in Hall Sensor mode uses two CCU4 slices - one to add a phase delay and one to capture the time between two correct hall patterns.</p>
<p>The personality supports 3 hall sensors and 2 hall sensors in the following use cases:</p><ol type="1">
<li>Find the speed and position for the PMSM motor: In this use case, the speed and position of the PMSM motor is obtained based on the hall sensor input. It is used in the PMSM motor control, which drives the inverter as per SVM algorithm.</li>
<li>Find the speed and position for the BLDC motor: In this use case, the speed and position of the BLDC motor is obtained based on the hall sensor input. It is used in the BLDC motor control, which drives the inverter as per multi-channel pattern sequence.</li>
</ol>
<p>Refer to the API reference <a class="el" href="group___p_o_s_i_f.html">Position Interface Unit (POSIF)</a> for the API details.</p>
<p>Refer to the device Datasheet and Reference Manual for the HW details.</p>
<h1><a class="anchor" id="section_personality_wdt"></a>
WDT Personality</h1>
<p>The Window boundaries configuration: </p><div class="image">
<img src="wdt_window.png" alt="wdt_window.png"/>
</div>
 <div class="image">
<img src="wdt_window_cfg.png" alt="wdt_window_cfg.png"/>
</div>
<p>The Pre-Warning Alarm interrupt configuration: </p><div class="image">
<img src="wdt_prewarn.png" alt="wdt_prewarn.png"/>
</div>
 <div class="image">
<img src="wdt_prewarn_cfg.png" alt="wdt_prewarn_cfg.png"/>
</div>
<h2><a class="anchor" id="subsection_wdt_codeGen"></a>
Code Generation</h2>
<p>The configurator performs the [name]_EventHandler registration in the generated code, so declare it in the application code, for example for the xmc4xxx devices: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> NMI_Handler(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___s_c_u.html#ga9ba1ce317ce89edfea107893fbd8a0be">XMC_SCU_IRQHandler</a>((uint32_t)SCU_0_IRQn);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> MyWDT_EventHandler(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <a class="code" href="group___w_d_t.html#ga5ce909e8a079938c30259381a993d316">XMC_WDT_Service</a>();</div><div class="line">}</div></div><!-- fragment --><p>and then start the block itself (the rest of configurations are performed in the generated code): </p><div class="fragment"><div class="line">    <a class="code" href="group___w_d_t.html#gad01935f7e01dcc6697efe642d64e0053">XMC_WDT_Start</a>();</div></div><!-- fragment --><p> Refer to the API reference <a class="el" href="group___w_d_t.html">Watchdog driver (WDT)</a> for the API details.</p>
<p>Refer to the device Datasheet and Reference Manual for HW details.</p>
<h1><a class="anchor" id="section_personality_uart"></a>
UART Personality</h1>
<h2><a class="anchor" id="subsection_uart_rx_inputs"></a>
RXD Input Connection Signals</h2>
<p>There is a possibility to extend the set of pins available as UART RXD input using pins from DX3 and DX5 input stages. By selecting DX3INS connection for RXD signal, the pin configured on DX3 input is used as RXD, for example:</p>
<div class="image">
<img src="uart_dx3.png" alt="uart_dx3.png"/>
</div>
<p>Additionally, the pin set for RXD connection could be extended further with DX5 inputs, if DX5INS connection is selected for DX3 input in the previous example:</p>
<div class="image">
<img src="uart_dx5.png" alt="uart_dx5.png"/>
</div>
<p>Refer to the API reference <a class="el" href="group___u_a_r_t.html">Universal Asynchronous Receiver/Transmitter (UART)</a> for the API details.</p>
<p>Refer to the device Datasheet and Reference Manual for HW details. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>XMC Peripheral Library for XMC1000 Family</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
